{"version":3,"sources":["store/userReduce.js","store/index.js","view/Login/index.js","view/NoMatch/index.js","view/Layout/index.js","view/EditProject/toolbar.js","component/chart/index.js","component/drag.js","router/index.js","view/EditProject/index.js","App.js","serviceWorker.js","index.js"],"names":["defaultState","isLogin","userinfo","userStore","state","user","store","createStore","combineReducers","action","newState","JSON","parse","stringify","type","value","applyMiddleware","thunk","LoginPage","create","name","connect","login","param","handleSubmit","e","preventDefault","props","form","validateFields","err","values","this","location","redirect","to","getFieldDecorator","className","alt","src","onSubmit","Item","rules","required","message","prefix","style","color","placeholder","block","htmlType","React","Component","NoMatch","pathname","Header","Sider","Content","HomePage","collapsed","toggle","setState","height","trigger","collapsible","theme","mode","defaultSelectedKeys","key","onClick","margin","padding","background","minHeight","componentList","child","w","h","ActionItems","operation","ActionGroup","map","item","i","items","k","Toolbar","Rect","x","top","y","left","width","MinIcon","Drag","move","persist","touchX","pageX","touchY","pageY","document","onmousemove","ev","index","onmouseup","resize","initW","initH","moveX","moveY","isEdit","onMouseDown","select","children","RouteSate","exact","path","component","Layout","stage","scale","compList","TopBarOperation","isComp","clearSlect","push","iNow","compListLen","length","forEach","createdComp","zoom","data","console","log","Object","assign","position","transform","class","rest","Comp","charts","tap","marks","10","105","200","min","max","tooltipVisible","defaultValue","onChange","PrivateRoute","render","App","Login","Boolean","window","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"0OACMA,EAAe,CACnBC,SAAS,EACTC,SAAU,IAmBCC,EAAY,SAACC,GAAD,OAAYA,EAAMC,MCX5BC,EAPDC,YACZC,YAAgB,CACdH,KDAsB,WAAmC,IAAlCD,EAAiC,uDAAzBJ,EAAcS,EAAW,uCACpDC,EAAWC,KAAKC,MAAMD,KAAKE,UAAUT,IAC3C,OAAQK,EAAOK,MACb,IAAK,QAGH,OAFAJ,EAAST,SAAU,EACnBS,EAASR,SAAWO,EAAOM,MACpBL,EACT,QACE,OAAON,MCNXY,YAAgBC,M,yJC8DHC,EA/Dd,IAAKC,OAAO,CAAEC,KAAM,gB,GACpBC,YAAQlB,EAAW,CAACmB,MFgBA,SAACC,GAAD,MAAY,CAACT,KAAM,QAASC,MAAOQ,K,8MEbtDC,aAAe,SAAAC,GACbA,EAAEC,iBACF,EAAKC,MAAMC,KAAKC,eAAe,SAACC,EAAKC,GAC9BD,GACH,EAAKH,MAAML,MAAMS,M,wEAKd,IAAD,EACsBC,KAAKL,MAA1B1B,EADD,EACCA,QAASgC,EADV,EACUA,SAEhB,GAAIhC,EAAS,CAAC,IAELG,EAAS6B,EAAT7B,MACH8B,EAAW,IAEf,OADA9B,IAAU8B,EAAW9B,EAAM8B,UACpB,kBAAC,IAAD,CAAUC,GAAID,IAEf,IAEEE,EAAsBJ,KAAKL,MAAMC,KAAjCQ,kBACR,OAAO,yBAAKC,UAAU,cACpB,yBAAKA,UAAU,cACb,yBAAKC,IAAI,OAAOC,IAAI,yEAEtB,uBAAMC,SAAUR,KAAKR,aAAca,UAAU,cAC7C,sBAAMI,KAAN,KACGL,EAAkB,WAAY,CAC7BM,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,iCADpCR,CAGC,uBACES,OAAQ,uBAAM/B,KAAK,OAAOgC,MAAO,CAAEC,MAAO,qBAC1CC,YAAY,eAIlB,sBAAMP,KAAN,KACGL,EAAkB,WAAY,CAC7BM,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,iCADpCR,CAGC,uBACES,OAAQ,uBAAM/B,KAAK,OAAOgC,MAAO,CAAEC,MAAO,qBAC1CjC,KAAK,WACLkC,YAAY,eAIlB,sBAAMP,KAAN,KACE,uBAAQ3B,KAAK,UAAUmC,OAAK,EAACC,SAAS,UAAtC,uB,GAnDcC,IAAMC,a,MCDfC,E,iLAJX,OAAO,qCAAWrB,KAAKL,MAAMM,SAASqB,SAA/B,2B,GAFWH,IAAMC,W,4DCApBG,E,IAAAA,OAAQC,E,IAAAA,MAAOC,E,IAAAA,QAwDRC,E,2MApDbtD,MAAQ,CACNuD,WAAW,G,EAGbC,OAAS,WACP,EAAKC,SAAS,CACZF,WAAY,EAAKvD,MAAMuD,a,wEAKzB,OAAQ,uBAAQb,MAAO,CAACgB,OAAQ,SAChC,kBAACN,EAAD,CAAOO,QAAS,KAAMC,aAAW,EAACL,UAAW3B,KAAK5B,MAAMuD,WACtD,yBAAKtB,UAAU,SACf,uBAAM4B,MAAM,OAAOC,KAAK,SAASC,oBAAqB,CAAC,MACrD,sBAAM1B,KAAN,CAAW2B,IAAI,KACb,uBAAMtD,KAAK,SACX,wCAEF,sBAAM2B,KAAN,CAAW2B,IAAI,KACb,uBAAMtD,KAAK,iBACX,wCAEF,sBAAM2B,KAAN,CAAW2B,IAAI,KACb,uBAAMtD,KAAK,WACX,0CAIN,2BACE,kBAACyC,EAAD,CAAQlB,UAAU,WAChB,uBACEA,UAAU,UACVvB,KAAMkB,KAAK5B,MAAMuD,UAAY,cAAgB,YAC7CU,QAASrC,KAAK4B,UAGlB,kBAACH,EAAD,CACEX,MAAO,CACLwB,OAAQ,YACRC,QAAS,GACTC,WAAY,OACZC,UAAW,MALf,iB,GAvCiBtB,IAAMC,W,4CCDvBsB,EAAgB,CACpB,CACE5D,KAAM,aACNM,KAAM,gBAER,CACEN,KAAM,UACNM,KAAM,gBAER,CACEN,KAAM,YACNM,KAAM,gBAER,CACEN,KAAM,OACNM,KAAM,eACNuD,MAAO,CAAC,CACN7D,KAAM,OACNM,KAAM,eACNwD,EAAG,IACHC,EAAG,KACF,CACD/D,KAAM,UACNM,KAAM,qBACNwD,EAAG,IACHC,EAAG,QAWT,SAASC,EAAT,GAA+C,IAAzBC,EAAwB,EAAxBA,UAAWjE,EAAa,EAAbA,KAAMM,EAAO,EAAPA,KACrC,OAAO,yBAAKiB,UAAU,gBAAgBgC,QAAS,kBAAMU,GAAaA,EAAUjE,KAC5E,uBAAMA,KAAMA,IACZ,8BAAOM,IAST,SAAS4D,EAAT,GAAmC,IAAbD,EAAY,EAAZA,UACpB,OAAOL,EAAcO,IAAI,SAACC,EAAMC,GAAP,OAAc,wBAAIf,IAAKe,GAC5C,kBAACL,EAAD,CAAahE,KAAMoE,EAAKpE,KAAMM,KAAM8D,EAAK9D,OACvC8D,EAAKP,OAAS,yBAAKtC,UAAU,kBAC3B,yBAAKA,UAAU,kBACb,4BAEE6C,EAAKP,MAAMM,IAAI,SAACG,EAAOC,GAAR,OAAe,wBAAIjB,IAAKiB,EAAGhB,QAAS,kBAAMU,EAAUK,GAAO,KACtE,yBAAK/C,UAAU,aACb,yBAAKA,UAAU,oBACf,0BAAMA,UAAU,mBAAmB+C,EAAMhE,gB,IAsD9CkE,E,iLAzCJ,IACAP,EAAa/C,KAAKL,MAAlBoD,UAEP,OAAO,4BAAQ1C,UAAU,uBACzB,yBAAKA,UAAU,iBACb,yBAAKC,IAAI,OAAOC,IAAI,yEAEtB,yBAAKF,UAAU,kBACb,yBAAKA,UAAU,wBACb,wBAAIA,UAAU,YACZ,4BACE,kBAACyC,EAAD,CAAaC,UAAWA,EAAW3D,KAAK,eAAKN,KAAK,cAEpD,4BACE,kBAACgE,EAAD,CAAaC,UAAWA,EAAW3D,KAAK,eAAKN,KAAK,eAIxD,yBAAKuB,UAAU,0BACb,wBAAIA,UAAU,YACZ,kBAAC2C,EAAD,CAAaD,UAAWA,MAG5B,yBAAK1C,UAAU,yBACb,wBAAIA,UAAU,YACZ,4BACE,kBAACyC,EAAD,CAAaC,UAAWA,EAAW3D,KAAK,iCAAQN,KAAK,gBAEvD,4BACE,kBAACgE,EAAD,CAAaC,UAAWA,EAAW3D,KAAK,eAAKN,KAAK,UAEpD,4BACE,kBAACgE,EAAD,CAAaC,UAAWA,EAAW3D,KAAK,eAAKN,KAAK,mB,GAjCxCqC,IAAMC,WCpCb,GACbmC,K,iLAlCS,IAAD,EACgBvD,KAAKL,MAAnB6D,EADF,EACEA,EACF1C,EAAM,CACV2C,IAHI,EACKC,GAEC,MACVC,KAAMH,GAAK,MACXI,MALI,EACQhB,EAID,KACXd,OANI,EACWe,EAKH,MAEd,OAAO,yBAAKxC,UAAU,kBAAkBS,MAAOA,GAC7C,yBAAKT,UAAU,cAAf,iC,GAXac,IAAMC,WAqCvByC,Q,iLAlBS,IAAD,EACgB7D,KAAKL,MAAnB6D,EADF,EACEA,EACF1C,EAAM,CACV2C,IAHI,EACKC,GAEC,MACVC,KAAMH,GAAK,MACXI,MALI,EACQhB,EAID,KACXd,OANI,EACWe,EAKH,MAEd,OAAO,yBAAKxC,UAAU,kBAAkBS,MAAOA,GAC7C,yBAAKT,UAAU,cACb,yBAAKA,UAAU,gB,GAXDc,IAAMC,YClBP0C,E,2MAGnBC,KAAO,SAACtE,GACNA,EAAEuE,UACF,IAAMC,EAASxE,EAAEyE,MAAQ,EAAKvE,MAAM6D,EAC9BW,EAAS1E,EAAE2E,MAAQ,EAAKzE,MAAM+D,EAEpCW,SAASC,YAAc,SAACC,GACtB,IAAMf,EAAIe,EAAGL,MAAQD,EACfP,EAAIa,EAAGH,MAAQD,EACrB,EAAKxE,MAAMoE,KAAKP,EAAGE,EAAG,EAAK/D,MAAM6E,QAGnCH,SAASI,UAAW,WAClBJ,SAASC,YAAc,O,EAK3BI,OAAS,SAACjF,EAAGX,GACXW,EAAEuE,UACF,IAAMC,EAASxE,EAAEyE,MACXC,EAAS1E,EAAE2E,MACXO,EAAQ,EAAKhF,MAAMiD,EACnBgC,EAAQ,EAAKjF,MAAMkD,EACrBD,EAAI+B,EACJ9B,EAAI+B,EAERP,SAASC,YAAc,SAACC,GACtB,IAAMM,EAAQN,EAAGL,MAAQD,EACnBa,EAAQP,EAAGH,MAAQD,EAEzB,GAAY,MAATrF,EACD8D,EAAIiC,EAAQF,OACP,GAAY,MAAT7F,EACR+D,EAAIiC,EAAQF,MACP,CAGL/B,EAAI+B,IAFJhC,EAAIiC,EAAQF,GACGA,GAGjB,EAAKhF,MAAM+E,OAAO9B,EAAGC,EAAG,EAAKlD,MAAM6E,QAGrCH,SAASI,UAAW,WAClBJ,SAASC,YAAc,O,wEAIlB,IAAD,SACwBtE,KAAKL,MAA3B6D,EADF,EACEA,EAAGE,EADL,EACKA,EACL5C,EAAQ,CACZ2C,IAAKC,GAAK,MACVC,KAAMH,GAAK,MACXI,MALI,EACQhB,EAID,KACXd,OANI,EACWe,EAKH,MAGVxC,EAAY,OAGhB,OAZM,EACc0E,SAST1E,GAAa,WAEjB,yBAAKA,UAAU,kBAAkBS,MAAOA,EAAOkE,YAAahF,KAAKL,MAAMsF,QAC5E,yBAAK5E,UAAWA,GACd,yBAAKA,UAAU,aACb,yBAAKA,UAAU,kBACf,yBAAKA,UAAU,mBACf,yBAAKA,UAAU,mBAAmBmD,EAAlC,KAAuCE,IAEzC,yBAAKrD,UAAU,yBACb,0BAAMA,UAAU,aAAa2E,YAAa,SAACvF,GACzCA,EAAEuE,UACF,EAAKU,OAAOjF,EAAG,QAEjB,0BAAMY,UAAU,cAAc2E,YAAa,SAACvF,GAC1CA,EAAEuE,UACF,EAAKU,OAAOjF,EAAG,QAEjB,0BAAMY,UAAU,cAAc2E,YAAa,SAACvF,GAC1CA,EAAEuE,UACF,EAAKU,OAAOjF,OAGhB,yBAAKY,UAAU,WAAW2E,YAAahF,KAAK+D,QAE7C/D,KAAKL,MAAMuF,c,GArFgB/D,IAAMC,W,kOCMlC+D,EAAY,CAChB,CACEC,OAAO,EACPC,KAAM,IACNC,UAAWC,GACX,CACAF,KAAM,eACNC,U,2MCuBFlH,MAAQ,CACNoH,MAAO,CACL5C,EAAG,IACHC,EAAG,IACH4C,MAAO,GAETC,SAAU,I,EAOZC,gBAAkB,SAAC7G,EAAM8G,GACvB,GAAGA,EAAO,CACR,IAAMF,EAAW,EAAKG,aACtBH,EAASI,KA1Cf,WAAyCJ,GAAW,IAA9B5G,EAA6B,EAA7BA,KAAMM,EAAuB,EAAvBA,KAAMwD,EAAiB,EAAjBA,EAAGC,EAAc,EAAdA,EAE/BkD,EAAO,EACLC,EAAcN,EAASO,OAC7BD,GAAeN,EAASQ,QAAQ,SAAChD,GAC5BA,EAAKpE,OAASA,GACfiH,MAIJ,IACIvC,EADY,GAEZE,EAFY,GAWhB,OAPIqC,IACF3G,GAAM2G,GAGLC,IACDtC,EAAIF,EATU,IASKwC,EAAc,IAE5B,CAACxC,IAAEE,IAAEd,IAAEC,IAAEzD,OAAKN,OAAKiG,QARb,GA6BKoB,CAAYrH,EAAM4G,IAChC,EAAK7D,SAAS,CACZ6D,SAAUA,M,EAMhBU,KAAO,SAACC,GACNC,QAAQC,IAAIF,GACZ,IAAMb,EAAQgB,OAAOC,OAAO,GAAI,EAAKrI,MAAMoH,OAC3CA,EAAMC,MAAQY,EAAO,IACrB,EAAKxE,SAAS,CACZ2D,MAAOA,K,4EAMT,IAAME,EAAQ,YAAO1F,KAAK5B,MAAMsH,UAEhC,OADAA,EAASzC,IAAI,SAACC,GAAD,OAAWA,EAAK6B,QAAS,IAC/BW,I,2BAIJlC,EAAEE,EAAEP,GACP,IAAMuC,EAAQ,YAAO1F,KAAK5B,MAAMsH,UAChCA,EAASvC,GAAGK,EAAIA,EAChBkC,EAASvC,GAAGO,EAAIA,EAChB1D,KAAK6B,SAAS,CACZ6D,SAAUA,M,6BAKP9C,EAAGC,EAAEM,GACV,IAAMuC,EAAQ,YAAO1F,KAAK5B,MAAMsH,UAChCA,EAASvC,GAAGP,EAAIA,EAChB8C,EAASvC,GAAGN,EAAIA,EAChB7C,KAAK6B,SAAS,CACZ6D,SAAUA,M,0BAKVvC,GACF,IAAMuC,EAAW1F,KAAK6F,aACtBH,EAASvC,GAAG4B,QAAS,EACrB/E,KAAK6B,SAAS,CACZ6D,SAAUA,M,+BAIL,IAAD,OACN,OAAO,yBAAKrF,UAAU,oBACpB,kBAAC,EAAD,CAAS0C,UAAW/C,KAAK2F,kBACzB,yBAAKtF,UAAU,sBACf,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,SAAf,+CAEF,yBAAKA,UAAU,qBACb,yBAAKS,MAAO,CACV4F,SAAU,aAEV,yBAAKrG,UAAU,sBAAsBS,MAAO,CAC1C8C,MAAO5D,KAAK5B,MAAMoH,MAAM5C,EACxBd,OAAQ9B,KAAK5B,MAAMoH,MAAM3C,EACzB8D,UAAU,SAAD,OAAW3G,KAAK5B,MAAMoH,MAAMC,MAA5B,OAET,yBAAKmB,MAAM,2BAET5G,KAAK5B,MAAMsH,SAASzC,IAAI,WAAkBE,GAAO,IAAvBrE,EAAsB,EAAtBA,KAAS+H,EAAa,wBACxCC,EAAOC,EAAOjI,GAD0B,E,qVAAA,IAE3B+H,GAAZjE,EAFuC,EAEvCA,EAAGC,EAFoC,EAEpCA,EACV,OAAO,kBAAC,EAAD,iBAAUgE,EAAV,CACLzE,IAAKe,EACLqB,MAAOrB,EACP8B,OAAQ,kBAAM,EAAK+B,IAAI7D,IACvBY,KAAM,SAACP,EAAGE,EAAGP,GAAP,OAAa,EAAKY,KAAKP,EAAGE,EAAIP,IACpCuB,OAAQ,SAAC9B,EAAGC,EAAGM,GAAP,OAAa,EAAKuB,OAAO9B,EAAGC,EAAGM,MAEvC,kBAAC2D,EAAD,CAAMlE,EAAGA,EAAGC,EAAGA,UAO3B,yBAAKxC,UAAU,uBACf,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,aAAf,8CACA,yBAAKA,UAAU,eACb,uBAAQ4G,MAAO,CACbC,GAAI,KACJC,IAAK,MACLC,IAAK,OACJC,IAAK,GAAIC,IAAK,IAAKC,gBAAgB,EAAMC,aAAc,IAAKC,SAAU,SAAC1I,GAAD,OAAW,EAAKqH,KAAKrH,a,GAjH9EoC,IAAMC,aDd1BsG,EADLrI,YAAQlB,E,oLAEE,IAAD,EACsC6B,KAAKL,MAA/BmH,EADZ,EACCxB,UAAiBrH,EADlB,EACkBA,QAAY4I,EAD9B,uCAcN,OAAO,kBAAC,IAAD,iBAAWA,EAAX,CAAiBc,OAZP,SAAAhI,GACf,OAAI1B,EACK,kBAAC6I,EAAD,MAEA,kBAAC,IAAD,CAAU3G,GAAI,CACnBmB,SAAU,SACVlD,MAAO,CACL8B,SAAUP,EAAMM,SAASqB,qB,GAVVH,IAAMC,a,EEClBwG,OAhBf,WACE,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUtJ,MAAOA,GACf,kBAAC,IAAD,KAEI6G,EAAUlC,IAAI,SAACC,EAAMC,GAAP,OAAa,kBAAC,EAAD,eAAcf,IAAKe,GAAOD,MAEvD,kBAAC,IAAD,CAAOmC,KAAK,SAASC,UAAWuC,IAChC,kBAAC,IAAD,CAAOvC,UAAWjE,Q,OCLRyG,QACW,cAA7BC,OAAO9H,SAAS+H,UAEe,UAA7BD,OAAO9H,SAAS+H,UAEhBD,OAAO9H,SAAS+H,SAASC,MACvB,2DCXNC,IAASP,OAAO,kBAAC,GAAD,MAAStD,SAAS8D,eAAe,SD0H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.83b275dc.chunk.js","sourcesContent":["\r\nconst defaultState = {\r\n  isLogin: true,\r\n  userinfo: {},\r\n}\r\n\r\nexport const userReduce = (state = defaultState, action) => {\r\n  const newState = JSON.parse(JSON.stringify(state))\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      newState.isLogin = true\r\n      newState.userinfo = action.value\r\n      return newState\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n/**\r\n * userStore\r\n * 导出所有用户模块的数据\r\n */\r\nexport const userStore = (state) => (state.user)\r\n\r\nexport const login = (param) => ({type: 'LOGIN', value: param})\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport {userReduce} from './userReduce'\r\n\r\nconst store = createStore(\r\n  combineReducers({\r\n    user: userReduce\r\n  }), \r\n  applyMiddleware(thunk)\r\n)\r\n\r\nexport default store\r\n","import React from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {Redirect} from 'react-router-dom'\r\nimport { Button, Input, Icon, Form } from 'antd';\r\nimport {login, userStore} from '@/store/userReduce'\r\n\r\n\r\n@Form.create({ name: 'normal_login' })\r\n@connect(userStore, {login})\r\nclass LoginPage extends React.Component{\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        this.props.login(values)\r\n      }\r\n    })\r\n  }\r\n\r\n  render(){\r\n    const {isLogin, location} = this.props\r\n    \r\n    if (isLogin) {\r\n\r\n      const {state} = location\r\n      let redirect = '/'\r\n      state && (redirect = state.redirect)\r\n      return <Redirect to={redirect}/>\r\n\r\n    } else {\r\n\r\n      const { getFieldDecorator } = this.props.form\r\n      return <div className=\"login-page\">\r\n        <div className=\"login-logo\">\r\n          <img alt=\"logo\" src=\"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg\"/>\r\n        </div>\r\n        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n        <Form.Item>\r\n          {getFieldDecorator('username', {\r\n            rules: [{ required: true, message: 'Please input your username!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder=\"Username\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          {getFieldDecorator('password', {\r\n            rules: [{ required: true, message: 'Please input your Password!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" block htmlType=\"submit\">\r\n            登录\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n      </div>\r\n    }\r\n  }\r\n}\r\n\r\nexport default LoginPage","import React from 'react';\r\n\r\nclass NoMatch extends React.Component{\r\n  render(){\r\n    return <div>404, {this.props.location.pathname} 不存在</div>\r\n  }\r\n}\r\n\r\nexport default NoMatch","import React from 'react'\r\nimport { Layout, Menu, Icon } from 'antd'\r\nconst { Header, Sider, Content } = Layout\r\n\r\nclass HomePage extends React.Component{\r\n\r\n  state = {\r\n    collapsed: false,\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n\r\n  render(){\r\n    return  <Layout style={{height: '100%'}}>\r\n    <Sider trigger={null} collapsible collapsed={this.state.collapsed}>\r\n      <div className=\"logo\" />\r\n      <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['1']}>\r\n        <Menu.Item key=\"1\">\r\n          <Icon type=\"user\" />\r\n          <span>nav 1</span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"2\">\r\n          <Icon type=\"video-camera\" />\r\n          <span>nav 2</span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"3\">\r\n          <Icon type=\"upload\" />\r\n          <span>nav 3</span>\r\n        </Menu.Item>\r\n      </Menu>\r\n    </Sider>\r\n    <Layout>\r\n      <Header className=\"top-bar\">\r\n        <Icon\r\n          className=\"trigger\"\r\n          type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\r\n          onClick={this.toggle}\r\n        />\r\n      </Header>\r\n      <Content\r\n        style={{\r\n          margin: '24px 16px',\r\n          padding: 20,\r\n          background: '#fff',\r\n          minHeight: 280,\r\n        }}\r\n      >\r\n        Content\r\n      </Content>\r\n    </Layout>\r\n  </Layout>\r\n  }\r\n}\r\n\r\nexport default HomePage","import React from 'react';\r\nimport {Icon} from 'antd'\r\n\r\nconst componentList = [\r\n  {\r\n    type: 'area-chart',\r\n    name: '图表'\r\n  },\r\n  {\r\n    type: 'picture',\r\n    name: '媒体'\r\n  },\r\n  {\r\n    type: 'font-size',\r\n    name: '文本'\r\n  },\r\n  {\r\n    type: 'shop',\r\n    name: '素材',\r\n    child: [{\r\n      type: 'Rect',\r\n      name: '矩形',\r\n      w: 200,\r\n      h: 200,\r\n    }, {\r\n      type: 'MinIcon',\r\n      name: '小图标',\r\n      w: 100,\r\n      h: 100,\r\n    }]\r\n  },\r\n]\r\n\r\n/**\r\n * 每个独立的操作项。\r\n * 用于告诉父级操作了什么选项\r\n * @param {*} {operation, type, name}\r\n * @returns\r\n */\r\nfunction ActionItems({operation, type, name}) {\r\n  return <div className='btn-container' onClick={() => operation && operation(type)}>\r\n  <Icon type={type} />\r\n  <span>{name}</span>\r\n  </div>\r\n}\r\n\r\n/**\r\n * 用于创建舞台元素的组合项\r\n * @param {*} {operation}\r\n * @returns\r\n */\r\nfunction ActionGroup({operation}) {\r\n  return componentList.map((item, i) => (<li key={i}>\r\n      <ActionItems type={item.type} name={item.name} />\r\n      { item.child && <div className=\"btn-item__list\">\r\n          <div className=\"list-container\">\r\n            <ul>\r\n              {\r\n              item.child.map((items, k) => (<li key={k} onClick={() => operation(items, true)}>\r\n                  <div className=\"tool-item\">\r\n                    <div className=\"tool-item__icon\"></div>\r\n                    <span className=\"tool-item__name\">{items.name}</span>\r\n                  </div>\r\n                </li>)\r\n              )}                  \r\n          </ul>\r\n        </div>\r\n      </div>\r\n      }\r\n  </li>))\r\n}\r\n\r\n\r\nclass Toolbar extends React.Component{\r\n  render(){\r\n    const {operation} = this.props\r\n\r\n    return <header className=\"editor-toolbar__top\">\r\n    <div className=\"navbar-header\">\r\n      <img alt=\"logo\" src=\"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg\"/>\r\n    </div>\r\n    <div className=\"editor-toolbar\">\r\n      <div className=\"editor-toolbar__left\">\r\n        <ul className=\"btns-box\">\r\n          <li>\r\n            <ActionItems operation={operation} name=\"撤销\" type=\"rollback\" />\r\n          </li>\r\n          <li>\r\n            <ActionItems operation={operation} name=\"重做\" type=\"retweet\" />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div className=\"editor-toolbar__center\">\r\n        <ul className=\"btns-box\">\r\n          <ActionGroup operation={operation}/>\r\n        </ul>\r\n      </div>\r\n      <div className=\"editor-toolbar__right\">\r\n        <ul className=\"btns-box\">\r\n          <li>\r\n            <ActionItems operation={operation} name=\"保存并预览\" type=\"fullscreen\" />\r\n          </li>\r\n          <li>\r\n            <ActionItems operation={operation} name=\"保存\" type=\"save\" />\r\n          </li>\r\n          <li>\r\n            <ActionItems operation={operation} name=\"退出\" type=\"close\" />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </header>\r\n  }\r\n}\r\n\r\nexport default Toolbar","import React from 'react'\r\n\r\nclass Rect extends React.Component{\r\n  \r\n  render(){\r\n    const { x, y, w, h} = this.props\r\n    const style={\r\n      top: y || 0 + 'px',\r\n      left: x || 0 + 'px',\r\n      width: w + 'px',\r\n      height: h + 'px'\r\n    }\r\n    return <div className=\"chart-component\" style={style}>\r\n      <div className=\"chart-rect\">\r\n        我是矩形\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nclass MinIcon extends React.Component{\r\n  render(){\r\n    const { x, y, w, h} = this.props\r\n    const style={\r\n      top: y || 0 + 'px',\r\n      left: x || 0 + 'px',\r\n      width: w + 'px',\r\n      height: h + 'px'\r\n    }\r\n    return <div className=\"chart-component\" style={style}>\r\n      <div className=\"chart-icon\">\r\n        <div className=\"icons\"></div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default {\r\n  Rect,\r\n  MinIcon\r\n}\r\n","import React from 'react'\r\n\r\nexport default class Drag extends React.Component{\r\n\r\n  // 组件移动事件\r\n  move = (e) => {\r\n    e.persist()\r\n    const touchX = e.pageX - this.props.x\r\n    const touchY = e.pageY - this.props.y\r\n\r\n    document.onmousemove = (ev) => {\r\n      const x = ev.pageX - touchX\r\n      const y = ev.pageY - touchY\r\n      this.props.move(x, y, this.props.index)\r\n    }\r\n\r\n    document.onmouseup= () => {\r\n      document.onmousemove = null\r\n    }\r\n  }\r\n\r\n  // 修改组件尺寸\r\n  resize = (e, type) => {\r\n    e.persist()\r\n    const touchX = e.pageX \r\n    const touchY = e.pageY\r\n    const initW = this.props.w\r\n    const initH = this.props.h\r\n    let w = initW\r\n    let h = initH\r\n\r\n    document.onmousemove = (ev) => {\r\n      const moveX = ev.pageX - touchX\r\n      const moveY = ev.pageY - touchY\r\n\r\n      if(type === 'w'){\r\n        w = moveX + initW\r\n      } else if(type === 'h'){\r\n        h = moveY + initH\r\n      } else {\r\n        w = moveX + initW\r\n        let rate = w / initW\r\n        h = initH * rate\r\n      }\r\n      this.props.resize(w, h, this.props.index)\r\n    }\r\n\r\n    document.onmouseup= () => {\r\n      document.onmousemove = null\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const { x, y, w, h, isEdit} = this.props\r\n    const style = {\r\n      top: y || 0 + 'px',\r\n      left: x || 0 + 'px',\r\n      width: w + 'px',\r\n      height: h + 'px'\r\n    }\r\n\r\n    let className = 'drag'\r\n    isEdit && (className += ' isEdit')\r\n\r\n    return <div className=\"chart-component\" style={style} onMouseDown={this.props.select}>\r\n      <div className={className} >\r\n        <div className=\"grid-line\">\r\n          <div className=\"grid-line-top\"></div>\r\n          <div className=\"grid-line-left\"></div>\r\n          <div className=\"grid-line-label\">{x}, {y}</div>\r\n        </div>\r\n        <div className=\"resize-handle-wrapper\">\r\n          <span className=\"move-width\" onMouseDown={(e) => {\r\n            e.persist()\r\n            this.resize(e, 'w')\r\n          }}></span>\r\n          <span className=\"move-height\" onMouseDown={(e) => {\r\n            e.persist()\r\n            this.resize(e, 'h')\r\n          }}></span>\r\n          <span className=\"move-resize\" onMouseDown={(e) => {\r\n            e.persist()\r\n            this.resize(e)\r\n          }} ></span>\r\n        </div>\r\n        <div className=\"move-tap\" onMouseDown={this.move}></div>\r\n      </div>\r\n      {this.props.children}\r\n    </div>\r\n  }\r\n}\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport {userStore} from '@/store/userReduce'\r\n\r\nimport Layout from '@/view/Layout'\r\nimport EditProject from '@/view/EditProject'\r\n\r\nconst RouteSate = [\r\n  {\r\n    exact: true,\r\n    path: '/',\r\n    component: Layout\r\n  },{\r\n    path: '/editproject',\r\n    component: EditProject\r\n  }\r\n]\r\n\r\n/**\r\n * 路由守望\r\n */\r\n@connect(userStore)\r\nclass PrivateRoute extends React.Component{\r\n  render(){\r\n    const {component: Comp, isLogin, ...rest} = this.props\r\n    const redirect = props => {\r\n      if (isLogin) {\r\n        return <Comp/>\r\n      } else {\r\n        return <Redirect to={{\r\n          pathname: '/login',\r\n          state: {\r\n            redirect: props.location.pathname\r\n          }\r\n        }} />\r\n      }\r\n    }\r\n    return <Route {...rest} render={redirect}></Route> \r\n  }\r\n}\r\n\r\nexport {\r\n  PrivateRoute,\r\n  RouteSate\r\n}","import React from 'react';\r\nimport Toolbar from './toolbar'\r\nimport charts from '@/component/chart'\r\nimport Drag from '@/component/drag'\r\nimport { Slider } from 'antd';\r\n\r\n/**\r\n * 创建组件\r\n * @param {*} type\r\n * @param {*} compList\r\n * @returns\r\n */\r\nfunction createdComp({type, name, w, h}, compList) {\r\n\r\n  let iNow = 0\r\n  const compListLen = compList.length\r\n  compListLen && compList.forEach((item) => {\r\n    if(item.type === type){\r\n      iNow ++\r\n    }\r\n  })\r\n\r\n  const spacing = 20\r\n  let x = spacing\r\n  let y = spacing\r\n  let isEdit = true\r\n  if (iNow) {\r\n    name+=iNow\r\n  }\r\n\r\n  if(compListLen){\r\n    y = x = spacing * (compListLen + 1)\r\n  }\r\n  return {x,y,w,h,name,type,isEdit}\r\n}\r\n\r\n\r\nclass EditProject extends React.Component{\r\n  state = {\r\n    stage: {\r\n      w: 800,\r\n      h: 600,\r\n      scale: 1\r\n    },\r\n    compList: []\r\n  }\r\n  /**\r\n   * 顶部区域的操作返回的具体操作\r\n   * @param {string} type 操作类型;\r\n   * @param {boolean} isComp 是否为组件;\r\n   */\r\n  TopBarOperation = (type, isComp) => {\r\n    if(isComp){\r\n      const compList = this.clearSlect()\r\n      compList.push(createdComp(type, compList))\r\n      this.setState({\r\n        compList: compList\r\n      })\r\n    }\r\n  }\r\n\r\n  //\r\n  zoom = (data) => {\r\n    console.log(data)\r\n    const stage = Object.assign({}, this.state.stage)\r\n    stage.scale = data / 100\r\n    this.setState({\r\n      stage: stage\r\n    })\r\n  }\r\n\r\n  // 清除所有组件选中状态\r\n  clearSlect(){\r\n    const compList = [...this.state.compList]\r\n    compList.map((item) => (item.isEdit = false))\r\n    return compList\r\n  }\r\n\r\n  // 组件移动\r\n  move(x,y,i){\r\n    const compList = [...this.state.compList]\r\n    compList[i].x = x\r\n    compList[i].y = y\r\n    this.setState({\r\n      compList: compList\r\n    })\r\n  }\r\n\r\n  // 修改组件尺寸\r\n  resize(w, h,i){\r\n    const compList = [...this.state.compList]\r\n    compList[i].w = w\r\n    compList[i].h = h\r\n    this.setState({\r\n      compList: compList\r\n    })\r\n  }\r\n\r\n  // 选中组件\r\n  tap(i){\r\n    const compList = this.clearSlect()\r\n    compList[i].isEdit = true\r\n    this.setState({\r\n      compList: compList\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return <div className=\"editor-container\">\r\n      <Toolbar operation={this.TopBarOperation}/>\r\n      <div className=\"editor-ctrl__left\"></div>\r\n      <div className=\"editor-ctrl__info\">\r\n        <div className=\"title\">我的第一个项目</div>\r\n      </div>\r\n      <div className=\"editor-ctrl__body\">\r\n        <div style={{\r\n          position: 'relative'\r\n        }}>\r\n          <div className=\"dashboard-container\" style={{\r\n            width: this.state.stage.w,\r\n            height: this.state.stage.h,\r\n            transform: `scale(${this.state.stage.scale})`\r\n          }}>\r\n            <div class=\"dashboard-grid-overlay\"></div>\r\n            {\r\n              this.state.compList.map(({type, ...rest}, i) => {\r\n                const Comp = charts[type]\r\n                const {w, h} = {...rest}\r\n                return <Drag {...rest}  \r\n                  key={i} \r\n                  index={i} \r\n                  select={() => this.tap(i)}\r\n                  move={(x, y, i) => this.move(x, y , i)}\r\n                  resize={(w, h, i) => this.resize(w, h, i)}\r\n                >\r\n                  <Comp w={w} h={h} />\r\n              </Drag>\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"editor-ctrl__right\"></div>\r\n      <div className=\"editor-ctrl__bottom\">\r\n        <div className=\"zoom-tips\">面板缩放百分比</div>\r\n        <div className=\"zoom-slider\">\r\n          <Slider marks={{\r\n            10: '10',\r\n            105: '105',\r\n            200: '200',\r\n          }} min={10} max={200} tooltipVisible={true} defaultValue={100} onChange={(value) => this.zoom(value)} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default EditProject","import React from 'react';\r\nimport {HashRouter as Router, Route, Switch} from 'react-router-dom'\r\nimport store from './store'\r\nimport {Provider} from 'react-redux'\r\nimport Login from './view/Login'\r\nimport NoMatch from './view/NoMatch'\r\nimport {PrivateRoute, RouteSate} from './router'\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Provider store={store}>\r\n        <Switch>\r\n          {\r\n            RouteSate.map((item, i) => <PrivateRoute key={i} {...item} />)\r\n          }\r\n          <Route path=\"/login\" component={Login} />\r\n          <Route component={NoMatch} />\r\n        </Switch>\r\n      </Provider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './style/style.less'\r\nimport * as serviceWorker from './serviceWorker';\r\n// import 'antd/dist/antd.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}